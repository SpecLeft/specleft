"""
Auto-generated skeleton tests from Markdown specs.
Regenerate using: specleft test skeleton

Generated by SpecLeft - https://github.com/SpecLeft/spec-left
"""

import pytest

from specleft import specleft

{% for feature in features | sort(attribute='feature_id') %}
# =============================================================================
# Feature: {{ feature.name }}
# ID: {{ feature.feature_id }}
{% if feature.description %}
# {{ feature.description }}
{% endif %}
# =============================================================================

{% for story in feature.stories | sort(attribute='story_id') %}
# Story: {{ story.name }}
# ID: {{ story.story_id }}
{% if story.description %}
# {{ story.description }}
{% endif %}

{% for scenario in story.scenarios | sort(attribute='scenario_id') %}
@specleft(
    feature_id="{{ feature.feature_id }}",
    scenario_id="{{ scenario.scenario_id }}",
    skip=True,
    reason="Skeleton test - not yet implemented",
)
{% if scenario.test_data %}
@pytest.mark.parametrize(
    "{{ scenario.test_data[0].params.keys() | list | join(', ') }}",
    [
{% for data_row in scenario.test_data %}
        ({{ data_row.params.values() | list | map('repr') | join(', ') }}),  # {{ data_row.description or '' }}
{% endfor %}
    ],
)
{% endif %}
def test_{{ scenario.scenario_id | snake_case }}({% if scenario.test_data %}{{ scenario.test_data[0].params.keys() | list | join(', ') }}{% endif %}):
    """{{ scenario.name }}

{% if scenario.description %}
    {{ scenario.description }}

{% endif %}
    Priority: {{ scenario.priority.value }}
{% if scenario.tags %}
    Tags: {{ scenario.tags | join(', ') }}
{% endif %}
    """
{% for step in scenario.steps %}
    with specleft.step({% if '{' in step.description or '}' in step.description %}f{% endif %}{{ (step.type.value | capitalize ~ ' ' ~ step.description) | repr }}):
        pass # TODO: Implement step

{% endfor %}

{% endfor %}
{% endfor %}
{% endfor %}
